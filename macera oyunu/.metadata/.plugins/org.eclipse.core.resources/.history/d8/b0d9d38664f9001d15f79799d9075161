package location.BattleLoc;

import java.util.Scanner;

import monster.Monster;
import monster.Zombie;
import player.Inventory;
import player.Player;

public class Cave extends BattleLoc{
	
	Monster zombie;
	
	
	public Cave() {}
	
	public Cave(Player player, Monster zombie) {
		super(player, zombie);
		this.zombie = zombie;
		zombie.setDamage(zombie.getDamage()-getPlayer().getDefence());
		if(zombie.getDamage()<0) {
			zombie.setDamage(0);
		}
	}
	
	
	Scanner scanner = new Scanner(System.in);
	
	@Override
	public void onLocation() throws Exception {
		
		int mN = zombie.monsterNumber();
		
		System.out.println();
		System.out.println("Dikkatli ol! MaÄŸarada birden fazla zombi olabilir");
		System.out.println("Zombilerin Ã¼stesinden gelebilirsen maÄŸaradan yemek kazanarak Ã§Ä±kacaÄŸÄ±nÄ± unutma");
		System.out.println("Fakat zombilerin Ã¼stesinden gelemezsen Ã¶lÃ¼rsÃ¼n ğŸ’€");
		scanner.nextLine();

		if(mN == 1) {
			fightOrFlight(mN);
			String savasYADAkac = scanner.nextLine();
			switch (savasYADAkac) {
			case "s": {
				int counter = 0;
				for(int i=0; i<mN; i++) {
					zombie.setHealthy(10);
					combat(zombie);
					System.out.println(" ZOMBÄ° Ã–LDÃœ !");
					counter ++;
				}
				
				moneyEarnedFromZombies(counter);	
				this.isFood();	
				break;
			}
			case "k": {
				selectLocation();
				break;
			}
			default:
				System.out.println("YanlÄ±ÅŸ seÃ§im yaptÄ±n !!!");
				onLocation();
			}
		}
		
		else if (mN == 2) {
			fightOrFlight(mN);
			String savasYADAkac = scanner.nextLine();
			switch (savasYADAkac) {
			case "s": {
				int counter = 0;
				for(int i=0; i<mN; i++) {
					zombie.setHealthy(10);
					combat(zombie);
					System.out.println(" ZOMBÄ° Ã–LDÃœ !");
					counter ++;
				}
				moneyEarnedFromZombies(counter);
				this.isFood();
				break;
			}
			case "k": {
				selectLocation();
				break;
			}
			default:
				System.out.println("YanlÄ±ÅŸ seÃ§im yaptÄ±n !!!");
				onLocation();
			}
		}
		
		else if(mN == 3){
			fightOrFlight(mN);
			String savasYADAkac = scanner.nextLine();
			switch (savasYADAkac) {
			case "s": {
				int counter = 0;
				for(int i=0; i<mN; i++) {
					zombie.setHealthy(10);
					combat(zombie);
					System.out.println(" ZOMBÄ° Ã–LDÃœ !");
					counter ++;
				}
				moneyEarnedFromZombies(counter);
				this.isFood();
				break;
			}
			case "k": {
				System.out.println("ğŸ‘£ ğŸ‘£ ğŸ‘£ ğŸ‘£ ğŸ‘£ ğŸ‘£ ğŸ‘£ ğŸ‘£ ğŸ‘£ ğŸ‘£ ğŸ‘£ ğŸ‘£ ğŸ‘£ ğŸ‘£");
				selectLocation();
				break;
			}
			default:
				System.out.println("YanlÄ±ÅŸ seÃ§im yaptÄ±n !!!");
				onLocation();
			}
		}
	}
	

	public void fightOrFlight(int mN) {
		System.out.println("MaÄŸarada " + mN + " adet zombi gÃ¶rÃ¼nÃ¼yor. " + mN +" tane zombiyle savaÅŸabilecek misin yoksa kaÃ§acak mÄ±sÄ±n ?");
		System.out.println("SavaÅŸmak istiyorsan s'ye bas, kaÃ§mak istiyorsan k'ye bas");
	}
	
	
	public void isFood() {
		if(getPlayer().getHealthy()>0) {
			System.out.println("***** ğŸ— KARÅINA Ã‡IKAN TÃœM ZOMBÄ°LERÄ° Ã–LDÃœRDÃœN VE YEMEK KAZANDIN ğŸ— *****");
			Inventory inventory = new Inventory();
			getPlayer().setInventory(inventory);
			getPlayer().getInventory().setFood(true);
		}
	}
	
	
	public void moneyEarnedFromZombies(int counter) {
		System.out.println(counter + " adet zombiden kazandÄ±ÄŸÄ±n para: " + (zombie.getMoney()*counter));
		getPlayer().setMoney((getPlayer().getMoney()+zombie.getMoney()*counter));
		System.out.println("ğŸ’² Mevcut paran: " + getPlayer().getMoney());
	}


}




